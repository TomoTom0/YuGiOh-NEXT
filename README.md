# 遊戯王NEXT

PCからも新鮮で快適な遊戯王Neuronライフを！

## intro

随分便利になった遊戯王Neuronアプリ。もう今では、PCから遊戯王公式データベースを見るけど、デッキ編集はスマホからしかしてない。そんな人も多いのではないでしょうか。

しかし、やっぱり。PCから操作したいときというものはあるものです。
そんなあなたを強力にこの拡張機能はサポートします。

PC版の遊戯王Neuron(公式データベース)でも、カード画像を並べながらデッキ編集できます！
カードをマウスでのドラッグ操作でも、クリック操作でも自在に移動できます！

<img src="./docs/usage/images/store-promo-01-easy-moving.png" alt="デッキ編集機能の概要" width="800">

カードを検索して、そこからカードを追加できます！
ページを移動せずにカードのテキスト、QAページでの解説、関連QA、関連カード、関連商品をすべてみることができます！

<img src="./docs/usage/images/store-promo-02-card-info.png" alt="カード詳細情報の4タブ表示" width="800">


**遊戯王NEXT(Neuron EXTension)**は、遊戯王Neuron(公式カードデータベース)でのデッキ管理を支援するChrome拡張機能です。

**現在のバージョン**: v0.5.4 ([変更履歴](./docs/release-notes/))


## 主要機能

### デッキ編集画面 (`#/ytomo/edit`)

デッキ編集専用の画面で、カードの検索・追加・管理を直感的に行えます。

<img src="./docs/usage/images/deck-edit/01-initial-state.png" alt="デッキ編集画面の全体構成" width="600">

#### 基本機能 (v0.3.0)

**カード操作**
- ドラッグ&ドロップでカードを移動
- ワンクリックでカード移動
- カード詳細情報を4つのタブで表示
  - **Info**: カードテキストとステータス
  - **Q&A**: 公式Q&A一覧
  - **Related**: 関連カード一覧（段階的取得対応 v0.4.4）
  - **Products**: 収録パック一覧（パック名クリックで公式ページへ v0.4.4）
- カード一覧のリスト/グリッド表示切り替え
- 禁止・制限・準制限カードの視覚表示
- ラッシュデュエル(Rush)画面での利用も可能

#### 検索・フィルター機能 (v0.4.0, v0.4.1, v0.4.4)

<img src="./docs/usage/images/deck-edit/07-search-function.png" alt="カード検索機能" width="600">

**高度なフィルター検索**
- カードタイプ、属性、種族、レベル/ランク/リンク等で絞り込み
- **ATK/DEF条件** (v0.4.4)
- **知的な排他制御** (v0.4.4)
  - 矛盾する選択肢を自動無効化（例: 通常モンスター選択時に効果モンスターが無効化）
  - Tooltipで無効化理由を表示

**コマンドモード** (v0.4.1)
- チップベースのフィルター入力（英語キーワード）
- NOT条件: `-race:warrior`
- 複数値入力: `/race:warrior+spellcaster`
- Enterキーでチップ変換

**マイデッキ検索** (v0.4.1)
- 手持ちのデッキから直接カードを検索

**検索入力欄位置設定** (v0.4.1, v0.4.2)
- Right Top / Right Bottom / Left Bottom から選択可能

#### ソート・整理機能 (v0.4.0, v0.4.1)

**ソート機能**
- 発売日（新しい順/古い順）
- 名前（A-Z/Z-A）
- ATK/DEF
- レベル/ランク
- 属性/種族

**カテゴリ・タグ自動分類**
- モンスタータイプ、属性、種族で自動フィルター補助
- 50音グループ（文字レベル分類）
- ダイアログ内検索機能 (v0.4.1)
- フィルタチップ表示

#### デッキ操作機能 (v0.4.1)

**デッキ管理**
- デッキ新規作成（セッショントークン自動取得）
- デッキ複製
- デッキ削除
- デッキ再読み込み（最新状態に更新）

**履歴管理**
- Undo/Redo機能（最大100履歴）
- カード追加/削除/移動の操作を記録

#### UI/UX機能

**高度マウス操作** (v0.4.2)
- 右クリックでカード移動（Main/Side/Extra → Trash、Trash/Search → Main/Extra）
- 中クリックでカード追加（検索結果→Main/Extra、同セクション内で複製）
- オプションページで有効/無効を切り替え可能

**キーボードショートカット** (v0.4.2, v0.4.3)
- グローバル検索: デフォルト `/`, `Ctrl+J`
- Undo: デフォルト `Ctrl+Z`
- Redo: デフォルト `Ctrl+Y`
- オプションページでカスタマイズ可能

**その他のUX改善**
- 未保存時の警告ダイアログ (v0.4.2)
  - 警告レベルを3段階で設定可能（Always/Without sorting order only/Never）
- 段階的関連カード取得 (v0.4.4)
  - 最初の100件を即座に表示
  - 残りをバックグラウンドで自動取得
- デッキ画像のダウンロード機能

詳細は [デッキ編集機能ガイド](./docs/usage/custom-deck-edit.md) をご覧ください。

### 公式デッキ表示画面

公式のデッキ表示ページに便利な機能を追加します。

<img src="./docs/usage/images/store-promo-03-viewing-page.png" alt="デッキ表示ページの追加機能" width="800">

#### シャッフル・ソート機能 (v0.3.0)

デッキのカード順序をランダムに並べ替えたり、元に戻すことができます。
特定のカードを固定して、シャッフル時に先頭に配置することも可能です。
デッキの回し具合を簡単に確かめたいときに便利です。

<img src="./docs/usage/images/shuffle-sort/shuffle-sort-animation.gif" alt="シャッフル・ソート・固定機能" width="600">

**機能詳細:**
- カードをワンクリックでシャッフル
- ソートボタンで元の順序に戻す
- カード右上クリックで固定/固定解除
  - 固定したカードはデッキ先頭に固定配置

#### デッキ画像作成 (v0.3.0)

デッキレシピをスマホのNeuronアプリのように画像として保存できます。
意図的に一部のデザインを公式とは変えています。

**機能詳細:**
- タイトルのカスタマイズ（デフォルトはデッキ名）
- 背景色の選択（赤/青）
- QRコードの表示/非表示切り替え
- 出力日時を記載

**作成される画像のサンプル:**

<img src="./docs/usage/images/deck-image/deck-recipe-sample.png" alt="デッキレシピ出力サンプル" width="600">

#### NEXT編集ボタン (v0.4.1)

公式デッキ表示画面から独自デッキ編集画面へワンクリックで遷移できるボタンを追加しました。

### オプションページ (v0.4.2)

拡張機能の設定を細かくカスタマイズできます。

#### 2層タブ構成

**メインタブ（画面ごとの分類）:**
1. **デッキ編集画面タブ**
   - 概要とアクセス
   - UI設定（検索入力欄位置、レイアウト等）
   - UX設定（未保存警告、マウス操作、キーボードショートカット等）
   - キャッシュ管理

2. **公式デッキ表示画面タブ**
   - 概要とアクセス
   - シャッフル機能（デモGIF付き）
   - 画像作成機能

3. **Generalタブ**
   - キーボードショートカット設定
   - 全般設定

#### 視覚的プレビュー

設定内容を視覚的に理解できるようになりました:

**検索入力欄位置のプレビュー**
- 2x2グリッドで位置を視覚化
- Right Top / Right Bottom / Left Bottom の3パターンを図示

**デッキレイアウトのプレビュー**
- ExtraとSideの配置を図示
- 縦並び（Extra → Side）と横並び（Extra | Side）を視覚的に比較

#### Material Design準拠

- スペーシング: 8pxグリッドシステム
- カラー: Google Material Designのカラーパレット
- シャドウ: elevation 2, 4, 8を適切に使い分け
- タイポグラフィ: Roboto フォントファミリー

## インストール方法

### Chrome Web Storeから（推奨）

Chrome Web Storeで公開中です：
https://chromewebstore.google.com/detail/jcchjpfdnidjbimdidipnegjbgfijmkb

### 手動インストール

releasesページから最新の`.zip`ファイルをダウンロードし、以下の手順でインストールしてください：
1. Chromeの拡張機能管理ページを開く（`chrome://extensions/`）
2. 右上の「デベロッパーモード」を有効に
3. 「パッケージ化されていない拡張機能を読み込む」をクリック
4. ダウンロードした`.zip`ファイルを解凍し、そのフォルダを選択

## 使い方

インストール後、[遊戯王カードデータベース](https://www.db.yugioh-card.com/)のデッキ表示ページにアクセスすると、以下のボタンが追加されます：

- **シャッフルボタン**: メインデッキの枚数表示の左側
- **ソートボタン**: シャッフルボタンの右側
- **デッキ画像作成ボタン**: メタデータ部分の下部

詳細は [ドキュメント](./docs/usage/README.md) をご覧ください。

## 対応ページ

- デッキ詳細ページ (`member_deck.action?ope=1`) - シャッフル機能、デッキ画像作成機能
- 独自デッキ編集ページ (`#/ytomo/edit`) - デッキ編集UI（ドラッグ&ドロップ、カード検索、デッキ画像作成）

## 対応言語

### 公式サイトの言語対応（カード情報パース）

拡張機能は公式サイトの以下10言語に対応しています：
- 日本語 (ja) / 英語 (en) / アジア英語 (ae)
- 韓国語 (ko) / 中国語 (cn)
- ドイツ語 (de) / フランス語 (fr) / イタリア語 (it) / スペイン語 (es) / ポルトガル語 (pt)

言語は公式サイトから自動検出されます（`request_locale`パラメータ）。

### 拡張機能UI

**注意**: 拡張機能のUI自体は多言語化されておらず、英語と日本語が混在しています。

## milestone

- [ ] 独自デッキ管理画面追加
- [ ] 簡易一人回し機能追加

## 注意事項

この拡張機能は非公式のツールです。遊戯王公式サイトの利用規約を遵守してご使用ください。

## ライセンス

ISC

## 開発者向け

- [アーキテクチャ設計](./docs/dev/architecture.md)
- [多言語対応 (i18n) ガイド](./docs/dev/i18n.md)
- [API ドキュメント](./docs/api/README.md)

## 関連リンク

- [遊戯王カードデータベース](https://www.db.yugioh-card.com/)
- [使い方ドキュメント](./docs/usage/README.md)
- [デッキ編集機能](./docs/usage/custom-deck-edit.md)
- [変更履歴 (CHANGELOG)](./docs/changelog/)

## お問い合わせ

ご質問・ご要望・バグ報告は、以下の方法でご連絡ください：

**お問い合わせフォーム**:
https://docs.google.com/forms/d/e/1FAIpQLSdh2wRCUWpX6ZLfma-g5O46eD93wOPHpDHWQGxdOcJLmm_tGQ/viewform?usp=pp_url&entry.1848091360=%E9%81%8A%E6%88%AF%E7%8E%8BNEXT(YuGiOh+Neuron+EXTension)

**メール**:
TomoIris427+GitHub@gmail.com

**GitHub Issues** (機能要望・バグ報告):
https://github.com/TomoTom0/YuGiOh-NEXT/issues

---

## 開発状況

### テスト・ドキュメント整備 Phase 1-3 完了（2025-11-26）

プロジェクトの品質向上とメンテナンス性強化を目的とした、テストとドキュメントの整備が完了しました。

**主な成果**:
- ✅ テスト成功率: 91.0% → **98.3%** (+7.3%)
- ✅ テスト数: 343 → **407** (+64件)
- ✅ APIカバレッジ: 0% → **75%**
- ✅ 包括的なドキュメント整備（テスト戦略、コントリビューションガイド）

**詳細**:
- [Phase 1-3完了レポート](./docs/dev/TESTING_PHASE_COMPLETE.md)
- [テスト戦略](./docs/dev/testing-strategy.md)
- [コントリビューションガイド](./CONTRIBUTING.md)

**次のステップ**:
- CI/CD統合（GitHub Actions）
- カバレッジ自動計測
- コンテンツスクリプトのテスト拡充
