# TODO

未着手のタスク（優先度順）

## 📊 現状サマリー

**カード情報スクレイピング機能**: ✅ **Phase 1完了**

詳細は `tasks/wip.md` を参照。

---

## 🔍 次のステップ（優先度: 高）

### カード情報スクレイピングの検証と完成

#### 動作確認
- [ ] 実際のカード検索を実行してパーサーの動作確認
  - モンスターカード（レベル、ランク、リンク、ペンデュラム）
  - 魔法カード（通常、速攻、永続、装備、フィールド、儀式）
  - 罠カード（通常、永続、カウンター）
- [ ] 未知の値の収集
  - console.warnで出力された未知の種族・タイプ・効果種類
  - マップ定義への追加が必要なもの
- [ ] フィールド存在確認
  - ciid, img_hash, ペンデュラム関連

#### リンクモンスター対応
- [ ] リンク数の取得方法調査
- [ ] 実装とテスト

#### マップ定義の補完
- [ ] 未知の種族・タイプがあれば追加
- [ ] 英語名の確認（識別子として適切か）

---

## 🚀 実装フェーズ（Phase 2以降）

### Phase 2: セッション管理とデッキ操作の完全実装
- [ ] セッション管理の実装
  - `api/session.ts` - cgid/ytkn取得
- [ ] デッキ操作の完全実装
  - デッキ一覧取得
  - デッキ個別取得
  - デッキ新規作成
  - デッキ複製
  - デッキ削除
  - デッキ保存（カード情報の完全版を使用）

### Phase 3: UI実装
- [ ] Popup UIの実装
  - デッキ一覧表示
  - デッキ詳細表示
  - カード検索UI
  - デッキ編集UI
- [ ] Content Script UIの実装
  - ページ内へのUI注入
  - 既存UIの拡張

### Phase 4: テストとデプロイ
- [ ] ユニットテストの実装
  - パーサー関数のテスト
  - カードタイプ判定のテスト
  - マップ変換のテスト
- [ ] E2Eテストの実装
  - 既存の調査スクリプトをテストに変換
- [ ] デプロイ準備
  - manifest.jsonの最終調整
  - README.mdの作成

---

## 🔍 調査フェーズの残タスク（優先度: 低）

### カード詳細ページの完全調査
- [ ] カード詳細ページのURL形式の確認
  - cidからのURL生成方法
  - 複数バージョン（再録）がある場合の対応
- [ ] カード詳細情報の完全な構造確認
  - 効果テキストの取得
  - 裁定情報の取得
  - 関連カードの取得

### 他言語対応
- [ ] 他言語での動作確認
  - 英語（en）、韓国語（ko）、中国語（zh-CN）
  - 各言語でのi18nデータ作成
  - DOM属性ベース判定の言語非依存性確認

### エラーハンドリングと制限
- [ ] エラーハンドリングの詳細調査
  - バリデーションエラーのメッセージ形式
  - デッキ保存失敗時のエラー内容
- [ ] レート制限の有無確認
  - API呼び出し頻度制限
  - 一時的なアクセス制限

### 追加機能
- [ ] 公開デッキ機能の調査
  - 公開設定の変更方法
  - 公開デッキの検索方法
- [ ] カード画像hashの正確な生成ルール
  - 現在は `{cid}_1_1_1` で動作
  - 複数イラストがある場合の番号付け

---

## 📝 設計ドキュメント（完成済み）

以下のドキュメントを参照して実装を進めること：

- ✅ `docs/design/implementation-design.md` - 完全な実装設計
- ✅ `docs/design/implementation-guide.md` - 実装ガイド
- ✅ `docs/research/api-investigation-results.md` - API仕様詳細
- ✅ `docs/research/INVESTIGATION_SUMMARY.md` - 調査成果サマリー
- ✅ `tmp/wip/intro-implementation-status.md` - intro.md機能実装状況
- ✅ `tmp/wip/card-scraping-proposal-v3.md` - カード情報スクレイピング設計

---

**次のアクション**: 実際のカード検索を実行してパーサーの動作確認とマップ定義の検証を行う。
