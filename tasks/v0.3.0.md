# v0.3.0 リリースタスク

## リリース目標
**リリース日**: 2025-11-17  
**目的**: デッキ編集UI + 多言語対応基盤の安定版リリース

## 完了済み項目 ✅

### デッキ編集UI
- ✅ 基本UI実装（Vue + Pinia）
- ✅ カードドラッグ＆ドロップ
- ✅ カード検索・詳細表示
- ✅ リスト/グリッド表示切り替え
- ✅ コンポーネント分離（CardQA, CardProducts）
- ✅ FLIPアニメーション実装
- ✅ レスポンシブデザイン

### 多言語対応基盤
- ✅ 言語検出ユーティリティ
- ✅ マッピングテーブル自動生成
- ✅ API多言語対応

### コードレビュー対応
- ✅ PR#2レビュー全対応完了
- ✅ 型安全性向上（ciid/imgs必須化）
- ✅ コード品質改善

## リリースに必要な残タスク 🚀

### 1. テスト実装（優先度：高）

#### 1.1 E2Eテスト
- [ ] テスト環境セットアップ
  - [ ] Playwright or Puppeteer導入検討
  - [ ] テストデータ準備（deck-detail-public-en.html活用）
  
- [ ] デッキ編集画面テスト
  ```typescript
  // tests/e2e/deck-edit.spec.ts
  - [ ] デッキロード機能
    - DNO入力
    - Loadボタンクリック
    - デッキ情報表示確認
  - [ ] カード検索機能
    - 検索クエリ入力
    - 検索結果表示確認
    - リスト/グリッド切り替え
  - [ ] カード追加機能
    - 検索結果からドラッグ
    - Main/Extra/Sideへドロップ
    - カード枚数更新確認
  - [ ] デッキ保存機能
    - Saveボタンクリック
    - 保存成功確認
  ```

- [ ] カード詳細表示テスト
  ```typescript
  // tests/e2e/card-detail.spec.ts
  - [ ] タブ切り替え
    - Info/Related/Products/QA各タブ
  - [ ] 収録パック展開
    - 展開ボタンクリック
    - カードリスト表示
    - 折りたたみボタンクリック
  - [ ] 関連カード表示
    - カードリスト表示
    - ソート機能
  ```

- [ ] 多言語テスト
  ```typescript
  // tests/e2e/i18n.spec.ts
  - [ ] 日本語ページ
    - 言語検出確認
    - カード情報取得
  - [ ] 英語ページ
    - 言語検出確認
    - カード情報取得
    - マッピング適用確認
  ```

#### 1.2 ユニットテスト
- [ ] ユーティリティテスト
  ```typescript
  // tests/unit/utils/language-detector.spec.ts
  - [ ] detectLanguage関数
    - #nowlanguage要素から検出
    - meta og:urlから検出
    - URLパラメータから検出
    - デフォルト値確認
  
  // tests/unit/utils/mapping-manager.spec.ts
  - [ ] マッピング取得
    - 属性マッピング
    - 種族マッピング
    - エフェクトタイプマッピング
  
  // tests/unit/utils/card-animation.spec.ts
  - [ ] FLIP アニメーション
    - 位置記録
    - アニメーション実行
  ```

- [ ] ストアテスト
  ```typescript
  // tests/unit/stores/deck-edit.spec.ts
  - [ ] カード追加/削除
  - [ ] カード移動
  - [ ] 並び替え
  - [ ] デッキ情報更新
  ```

#### 1.3 テストカバレッジ目標
- [ ] 新規コード: 70%以上
- [ ] 既存コード: 現状維持
- [ ] クリティカルパス: 100%

### 2. ドキュメント整備（優先度：高）

#### 2.1 ユーザー向けドキュメント
- [ ] `docs/usage/deck-edit.md`
  ```markdown
  # デッキ編集画面の使い方
  
  ## 基本操作
  - デッキのロード方法
  - カードの検索方法
  - カードの追加・削除方法
  - デッキの保存方法
  
  ## 便利な機能
  - リスト/グリッド表示切り替え
  - ソート機能
  - カード詳細表示
  - 関連カード・収録パック確認
  
  ## スクリーンショット
  - (画面キャプチャ追加)
  ```

- [ ] README.md更新
  ```markdown
  ## v0.3.0の新機能
  - 独自デッキ編集画面
  - カードドラッグ＆ドロップ
  - カード詳細表示（関連カード/収録パック/Q&A）
  - 多言語対応基盤
  ```

#### 2.2 開発者向けドキュメント
- [ ] `docs/dev/architecture.md`
  - コンポーネント構成図
  - 状態管理フロー（Pinia）
  - データフロー図

- [ ] `docs/dev/i18n.md`
  - 多言語対応の仕組み
  - マッピングテーブル仕様
  - 新言語追加方法

- [ ] `docs/dev/testing.md`
  - テスト実行方法
  - テストデータ作成方法
  - モック/スタブの使い方

- [ ] `docs/dev/api.md`
  - API仕様
  - エラーハンドリング
  - レート制限対応

#### 2.3 コードコメント
- [ ] 主要コンポーネントのJSDoc追加
- [ ] 複雑なロジックの説明コメント
- [ ] TODO/FIXMEの整理

### 3. オプションページ拡張（優先度：中）

#### 3.1 設定項目追加
- [ ] デッキ編集機能設定
  ```typescript
  // src/options/DeckEdit.vue
  interface DeckEditSettings {
    enabled: boolean;              // 機能ON/OFF
    defaultViewMode: 'list' | 'grid';  // デフォルト表示モード
    defaultSortOrder: string;      // デフォルトソート順
    enableAnimations: boolean;     // アニメーション有効化
    autoSave: boolean;            // 自動保存（将来実装）
  }
  ```

- [ ] 多言語設定
  ```typescript
  interface I18nSettings {
    mode: 'auto' | 'manual';      // 自動/手動選択
    language?: string;            // 手動選択時の言語
    updateMappings: boolean;      // マッピング自動更新
  }
  ```

#### 3.2 UI実装
- [ ] 設定フォーム作成
- [ ] 設定の保存・読み込み
- [ ] デフォルト値へのリセット
- [ ] 設定プレビュー機能

### 4. リリース準備（優先度：高）

#### 4.1 バージョン更新
- [ ] `version.dat` → 0.3.0
- [ ] `public/manifest.json` → 0.3.0
- [ ] `package.json` → 0.3.0

#### 4.2 CHANGELOG作成
```markdown
# Changelog

## [0.3.0] - 2025-11-17

### Added
- 独自デッキ編集画面 (#/ytomo/edit)
- カードドラッグ＆ドロップ機能
- カード詳細表示（関連カード/収録パック/Q&A）
- リスト/グリッド表示切り替え
- 多言語対応基盤（言語自動検出）
- FLIPアニメーション

### Changed
- カード型定義の改善（ciid/imgs必須化）
- API呼び出しの多言語対応

### Fixed
- デッキ保存時のimgsパラメータ
- scrollToTopのDOM依存性

### Known Issues
- (あれば記載)
```

#### 4.3 リリースノート作成
- [ ] 新機能の説明
- [ ] スクリーンショット/GIF作成
- [ ] 使い方デモ動画（任意）

#### 4.4 最終確認
- [ ] 全テスト通過確認
- [ ] ビルドエラーなし
- [ ] ドキュメントリンク確認
- [ ] Chrome/Edge両方での動作確認
- [ ] パフォーマンス確認
  - [ ] 初期ロード時間
  - [ ] メモリ使用量
  - [ ] カード検索速度

## スケジュール

| 日付 | タスク | 担当 | 状態 |
|------|--------|------|------|
| 11/13 | テスト環境セットアップ | - | ⏳ |
| 11/14 | E2Eテスト実装 | - | ⏭️ |
| 11/15 | ドキュメント作成 | - | ⏭️ |
| 11/16 | オプション設定実装 | - | ⏭️ |
| 11/17 | 最終確認・リリース | - | ⏭️ |

## リリース判定基準

### 必須項目（これらがすべて完了していること）
- [ ] E2Eテスト実装・通過
- [ ] ユーザー向けドキュメント完成
- [ ] バージョン番号更新
- [ ] CHANGELOG作成
- [ ] Chrome/Edgeでの動作確認

### 推奨項目（可能な限り完了させる）
- [ ] ユニットテストカバレッジ70%
- [ ] 開発者向けドキュメント完成
- [ ] オプション設定UI実装
- [ ] パフォーマンス最適化

### 延期可能項目（v0.3.1以降で対応）
- スクリーンショット/デモ動画
- 詳細なAPI仕様ドキュメント
- 自動保存機能
- ショートカットキー実装
