# v0.6.0 (2025-12-18)

## UI Improvements

- ImportDialog と ExportDialog を統合した ImportExportDialog を作成（タブ切り替えで Import/Export を選択可能）
- DeckEditTopBar のメニューで Import/Export を単一の項目に統合（アイコンを `mdiSwapHorizontal` に変更）
- ImportExportDialog のタブスタイルを SearchFilterDialog と統一（下線スタイル）
- LoadDialog のページングボタンを矢印に変更（`<` / `>`）
- LoadDialog のフッターを固定化（スクロール時も常に表示、高さを `calc(var(--dialog-font-size) * 4)` で固定）

## UX Improvements

- LoadDialogのページネーション改善
  - ページ移動時にダイアログを自動的に上にスクロール
  - 1ページあたりの表示件数を50から24に変更
  - デッキサムネイルにdno（デッキ番号）を表示（現在のデッキはグラデーション、その他は暗めの背景）

## Performance

- deck-cache.ts の orderPreserved 判定を O(N²) から O(N) に最適化（2つのポインタアルゴリズムで線形時間判定）
- TempCardDBのloadFromStorage()で全カードをメモリロードしていた問題を修正
  - TempCardDBは一時的なセッションキャッシュとして動作し、必要なカードのみを動的にロード
- デッキ表示画面の初期化処理を最適化（イベント委譲により70個の個別イベントリスナーを1つに集約）
- デッキサムネイルキャッシュの最適化
  - デッキリスト順序をlocalStorageで管理
  - 各デッキごとに「順序関係が保たれているか」「内容が変わっていないか」をチェック
  - 5個連続で順序・内容が保持されている場合、残りのAPI呼び出しをスキップ（早期終了）
  - デッキ保存/ロード時にキャッシュとサムネイルを自動更新（API呼び出し不要）

## Refactoring

- deck-thumbnail.ts の canvas.toBlob を Promise 化してコードの可読性を向上（Promise constructor anti-pattern を解消）
- deck-cache.ts の generateThumbnailsInBackground を async/await + for...of ループに書き換え（Promise constructor anti-pattern を解消、コードの可読性と保守性を向上）

## Internal Improvements

- テストカバレッジの大幅な改善（TASK-167関連）
  - `deck-cache.ts`のユニットテスト作成（39テスト、93.37%カバレッジ）
    - localStorage操作、ハッシュ計算、サムネイル生成、バックグラウンド生成（順序保持・早期終了ロジック）を網羅的にテスト
  - `LoadDialog.vue`のコンポーネントテスト作成（33テスト）
    - ダイアログ表示、デッキリスト表示、サムネイル表示、ページネーション、デッキロード、フォントサイズ調整を網羅的にテスト
  - `DeckEditLayout.vue`のテスト作成（18テスト）
    - サムネイル生成トリガー、キャッシュ連携（load/save/hash計算/変更検出/期限判定）、統合テスト風の動作確認を実施
