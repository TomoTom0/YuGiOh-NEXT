# v0.4.2 変更履歴

リリース日: 2025-11-27

## 新機能

### オプションページUI/UX改善

#### 2層タブ構成（メインタブ + サブタブ）
オプションページを大幅にリニューアルし、より直感的で使いやすい構造に変更しました。

**メインタブ**（画面ごとの分類）:
1. **デッキ編集画面タブ**
   - 概要とアクセス
   - UI設定
   - UX設定
   - キャッシュ管理
2. **公式デッキ表示画面タブ**
   - 概要とアクセス
   - シャッフル機能
   - 画像作成機能
3. **Generalタブ**
   - 全般設定

#### セクション単位でのコンポーネント分割
再利用性とメンテナンス性を向上させるため、オプションページを以下のコンポーネントに分割：
- **TopBar.vue**: ページ上部のヘッダー
- **VersionFooter.vue**: バージョン情報フッター
- **OverviewSection.vue**: 機能概要セクション
- **UISettingsSection.vue**: UI設定セクション
- **UXSettingsSection.vue**: UX設定セクション
- **CacheManagementSection.vue**: キャッシュ管理セクション
- **ShuffleSection.vue**: シャッフル機能セクション
- **ImageCreationSection.vue**: 画像作成機能セクション

#### 視覚的プレビュー追加
設定内容を視覚的に理解できるようになりました：

1. **検索入力欄位置のプレビュー**
   - 2x2グリッドで位置を視覚化
   - Right Top / Right Bottom / Left Bottom の3パターンを図示

2. **デッキレイアウトのプレビュー**
   - ExtraとSideの配置を図示
   - 縦並び（Extra → Side）と横並び（Extra | Side）を視覚的に比較

#### Material Design準拠
- スペーシング: 8pxグリッドシステム
- カラー: Google Material Designのカラーパレット
- シャドウ: elevation 2, 4, 8 を適切に使い分け
- タイポグラフィ: Roboto フォントファミリー

### UX設定機能

#### 未保存時の警告設定
デッキ編集時の警告動作を細かく制御できるようになりました：
- **Always**（デフォルト）: 常に警告を表示
- **Without sorting order only**: ソート順変更のみの場合は警告しない
- **Never**: 警告を表示しない

#### 高度なマウス操作設定
効率的な操作を実現する高度なマウス機能：
- **Enable**: 有効化
  - 右クリックでカード移動（Main → Extra, Extra → Side等）
  - 中クリックでカード追加（検索結果から直接追加）
- **Disable**（デフォルト）: 無効化（標準操作のみ）

#### キーボードショートカット設定
デッキ編集画面での操作を効率化するキーボードショートカットを設定できるようになりました：
- **グローバル検索**: デフォルト `/`（スラッシュキー）
- **Undo**: デフォルト `Ctrl+Z`
- **Redo**: デフォルト `Ctrl+Y`

各ショートカットは、オプションページのGeneralタブから変更できます：
1. 設定したい項目のボタンをクリック
2. 実際に使用したいキーの組み合わせを押す（Ctrl/Shift/Alt + キー）
3. プレビューで確認後、「保存」をクリック

## 変更

### アセット追加
Chrome Web Store用の紹介画像を追加（WebP形式、計3枚）：
- `store-promo-01.webp`: カードの簡単移動機能（87KB）
- `store-promo-02.webp`: カード情報表示機能（106KB）
- `store-promo-03.webp`: 公式デッキ表示画面（136KB）

## 技術的詳細

### コンポーネント構造
```
src/options/
├── App.vue                 # メインエントリーポイント（2層タブ管理）
├── components/
│   ├── TopBar.vue         # ヘッダー
│   ├── VersionFooter.vue  # フッター
│   ├── KeyInputDialog.vue # キーボードショートカット入力ダイアログ
│   ├── tabs/              # メインタブ
│   │   ├── DeckEditTab.vue
│   │   ├── DeckDisplayTab.vue
│   │   └── GeneralTab.vue
│   └── sections/          # サブタブのセクション
│       ├── OverviewSection.vue
│       ├── UISettingsSection.vue
│       ├── UXSettingsSection.vue
│       ├── CacheManagementSection.vue
│       ├── ShuffleSection.vue
│       └── ImageCreationSection.vue
```

### スタイル設計
```scss
// Material Designに準拠したスペーシング
$spacing-unit: 8px;
$spacing-1: 8px;
$spacing-2: 16px;
$spacing-3: 24px;
$spacing-4: 32px;

// エレベーション
$elevation-2: 0 2px 4px rgba(0, 0, 0, 0.08);
$elevation-4: 0 4px 8px rgba(0, 0, 0, 0.12);
$elevation-8: 0 8px 16px rgba(0, 0, 0, 0.16);
```

## 改善

- オプションページの可読性向上
- 設定項目の理解しやすさ向上
- コンポーネントの再利用性向上
- メンテナンス性向上

## 影響範囲

- 修正ファイル: 25個
- 新規ファイル: 14個（コンポーネント分割 + KeyInputDialog.vue）
- コミット数: 3件
  - 7753a07: オプションページのUI/UX改善
  - 97635a7: UX設定の実装
  - 5dcae79: キーボードショートカット設定機能とマウス操作の改善

## ドキュメント更新

- `docs/usage/options.md`: 2層タブ構成に合わせて全面書き換え
- `docs/design/option-page.md`: 設計ドキュメント更新

## 既知の問題

特になし

## 次バージョンの予定

- カラーテーマ機能の実装（ライト/ダーク）
- 言語切り替え機能の実装
- さらなるUI/UX改善
