# v0.4.5 変更履歴

リリース日: 2025-11-30

## 新機能

### SCSSベースのテーマシステム実装（Phase 1）

CSS カスタムプロパティを SCSS で管理し、Light/Dark テーマをサポートするシステムを実装しました。

#### 主な変更
- **themes.scss**: Light/Dark テーマの定義をまとめた SCSS ファイルを作成
  - CSS カスタムプロパティでカラー、背景色、ボーダー色を定義
  - `--theme-gradient` で グラデーション定義
  - 暗いテーマでの視認性確保

- **common.scss**: 従来の CSS から SCSS への変換
  - ネスト構文を活用したコード簡潔化
  - 保守性向上

- **全エントリーポイント**: インポート処理を `.scss` に統一
  - Vue コンポーネントで `@import` 使用時の一貫性確保

#### テーマ適用
- `settings.ts` の `applyTheme()` を簡素化
- テーマ設定がブラウザストレージに保存され自動適用される

## 改善

### scroll-to-top 機能の修正と全タブでの動作保証

各タブのスクロール機能を統一し、すべてのタブで scroll-to-top が正常に機能するよう修正。

#### 修正内容
1. **Search Tab**: scroll-to-top が機能しない問題を修正
   - スクロールコンテナが `.search-content` ではなく `.card-list-results` であることを確認
   - スクロール対象を正確に指定

2. **Related Tab**: CardDetail.vue に `handleScrollToTop()` 関数を追加
   - `.card-tab-content` をスクロール対象に指定

3. **Products Tab**: CardProducts.vue に `handleScrollToTop()` 関数を追加
   - `.card-tab-content` をスクロール対象に指定

#### 技術詳細
- 各コンポーネントが emit するイベントリスナーを設定
- タブ表示時にユーザーが「一番上に戻る」ボタンを押下すると、適切にスクロール動作

## リファクタリング

### バージョン管理の統一化

`version.dat` ファイルを廃止し、`package.json` のバージョンフィールドに一本化。

#### 変更
- `version.dat` ファイルを削除
- `scripts/dev/update-version.sh` から `version.dat` 更新処理を削除
- `CLAUDE.md` を更新して `package.json` での管理を明記

#### メリット
- バージョン管理の一元化
- build/deploy スクリプト簡潔化
- 誤りのリスク削減

### 一時ファイルの削除

- `temp_old_card_search.ts`: プロジェクトルートの古いバックアップファイルを削除
  - 必要な履歴は git に保存済みのため問題なし

## 技術的詳細

### 新規ファイル
- `src/styles/themes.scss`: テーマ定義（SCSS）

### 主要な修正ファイル
- `src/styles/common.scss`: CSS → SCSS 変換
- `src/stores/settings.ts`: テーマ適用処理簡素化
- `src/components/CardDetail.vue`: scroll-to-top 対応追加
- `src/components/CardProducts.vue`: scroll-to-top 対応追加
- `src/components/CardList.vue`: イベント発行（変更なし）
- すべてのエントリーポイント: `.scss` インポートに統一

## パフォーマンス

- テーマシステムの SCSS 実装による保守性向上
- ランタイムでのテーマ切り替え性能に変化なし

## 既知の問題

特になし

## 次バージョンの予定

- テーマシステム Phase 2: カスタムテーマ機能
- その他の SCSS リファクタリング
