# v0.5.7 (2025-12-13)

## Repository Maintenance

- **TASK-121**: Git 履歴のクリーンアップと最適化
  - git-filter-repo で不要ファイル（PNG 6個、HTML 19個、GIF 2個）を履歴から削除
  - PNG→WebP 変換（15ファイル、1.64MB→372KB、77%削減）
  - コミット数を 556→29 に削減（95%削減）
  - リポジトリサイズを 66MB→8.6MB に削減（87%削減）
  - 全29コミットにSSH署名を追加
  - main-new, dev-new ブランチを作成してプッシュ
  - 既存タグを -old 付きに変更し、main-new に新タグを付与
  - ローカルブランチを 60個→2個 に整理

- **TASK-122, 123**: バージョンタグの整備
  - 欠落していた9個のバージョンタグ（v0.4.1-v0.4.4, v0.5.0-v0.5.2, v0.5.4, v0.5.5）を正確なコミットに付与
  - package.json 履歴解析により正確なリリースコミットを特定
  - 全15バージョンのタグ整備完了

- **TASK-124**: Git 履歴の不要ファイル調査
  - プロジェクトルートの6個のPNG（436KB）が削除候補と特定
  - git-filter-repo 実行計画を作成

## Documentation

- **f8ac742**: PNG 画像を WebP 形式に変換
  - 15個のPNGファイル（1.64MB）を WebP（372KB）に変換
  - 77% のサイズ削減
  - 画質85%を維持

- **8e4a501**: ドキュメント構造の整理とパス修正
  - docs/changelog/ に統一（release-notes/ ディレクトリ削除）
  - doc/ の内容を docs/ に統合
  - PNG→WebP 参照を全て修正（17箇所）
  - 削除済みGIF参照を削除（2箇所）
  - 不要な changelog ファイル削除（notyet.md, unleased.md）

## New Features

- **PR-68**: Right Area 設定とUI改善
  - Right Area 幅設定を追加（S/M/L/XL、デフォルトM）
  - Right Area フォントサイズ設定を追加（s/m/l/xl、デフォルトm）
  - オプションページにUI設定セクションを追加

## Refactoring

- **PR-68**: 検索API の統一化
  - searchCardsByName() 関数を削除し、searchCards() に統一
  - parseSearchResults() 内で UnifiedDB への保存を一元化
    - 全ての検索でカードが自動的にキャッシュされる
  - searchCardsAuto() を searchCards() 使用に統一
  - DeckEditLayout.vue の検索も searchCards() に変更

## Bug Fixes

- **PR-68**: 検索条件ダイアログの問題を修正
  - チップクリック時にダイアログが閉じる問題を解決（@click.stop 追加）
  - チップクリック時に勝手に検索が実行される問題を解決（emit('apply') 削除）
  - 検索ボタン押下時に検索が実行されない問題を解決（直接 searchStore.searchFilters を使用）
  - 検索実行時に search タブのスクロール位置を上に戻す機能を追加

- **PR-68**: UI/UX の改善
  - 検索結果カードの info 表示時の「Base card info not available」エラー解消
  - デッキ表示画面の extra/side セクションでもアイコン表示
  - sortfix アイコンを修正（OFF は開いた錠、ON は閉じた錠）
  - デッキ表示ページでロック済みカードのアイコンを常時表示
  - フィルターアイコン削除時のエラーを修正
  - ポップアップの FOUC 問題を修正
  - 検索条件ダイアログのフォントサイズを固定化（Right Area 設定の影響を受けないように）

## Tests

- **PR-68**: テストコードの追加
  - deck-edit-operations.test.ts 追加（675行）
  - mapping-manager.test.ts 追加（937行）
  - unified-cache-db.test.ts 追加（927行）

---

**合計変更**: リポジトリ保守（4個）、ドキュメント整理、新機能（2個）、リファクタリング、バグ修正（9個）、テスト追加（3個）
