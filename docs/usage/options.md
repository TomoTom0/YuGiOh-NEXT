# オプションページガイド

**バージョン**: v0.4.2  
**最終更新**: 2025-11-27

Chrome拡張機能のオプションページでの設定項目について説明します。

## アクセス方法

1. Chromeの拡張機能アイコンをクリック
2. 「オプション」または歯車アイコンをクリック
3. または、chrome://extensions から「詳細」→「拡張機能のオプション」

## ページ構成

オプションページは**2層タブ構成**です：
- **メインタブ**（上部）: 対象画面ごとの分類
  - デッキ編集画面
  - 公式デッキ表示画面
  - General
- **サブタブ**（メインタブ下）: 機能カテゴリごとの分類

---

## 1. デッキ編集画面タブ

### 概要とアクセス

独自のデッキ編集画面に関する設定です。

**アクセス方法**:
- URL直接入力: `https://www.db.yugioh-card.com/yugiohdb/#/ytomo/edit`
- ポップアップメニューから「デッキ編集」をクリック
- 公式デッキ表示画面で「NEXT編集」ボタンをクリック（opt-out可能）

**主な機能**:
- ドラッグ&ドロップでカード移動
- カード検索・追加
- カード詳細情報表示（Info/Related/Products/QAタブ）
- Undo/Redo機能

### UI設定

#### 表示する画像の大きさ
- **S**: 小（省スペース）
- **M**: 中
- **L**: 大（デフォルト）
- **XL**: 特大

#### 検索入力欄の位置
**視覚的プレビュー付き**（2x2グリッド表示）
- **Right Top**（デフォルト）: 右上
- **Right Bottom**: 右下
- **Left Bottom**: 左下

#### Side/Extraセクションの配置
**視覚的プレビュー付き**（レイアウト図示）
- **縦並び**（デフォルト）: Extra → Side の順に縦に配置
- **横並び**: Extra | Side を横に並べて配置

### UX設定

#### デッキ枚数制限
- **No Limit**（デフォルト）: 制限なし
- **Current Limit**: 現行の枚数制限（メイン40-60枚、Extra0-15枚、Side0-15枚）

#### 未保存時の警告
- **Always**（デフォルト）: 常に警告
- **Without sorting order only**: ソート順変更のみの場合は警告しない
- **Never**: 警告しない

#### 高度なマウス操作
- **Enable**: 右クリックでカード移動、中クリックでカード追加
- **Disable**（デフォルト）: 標準操作のみ

### キャッシュ管理

#### キャッシュのクリア
- **カード情報キャッシュをクリア**: UnifiedCacheDBの全データを削除
- **注意**: 次回アクセス時に再度カード情報を取得します

---

## 2. 公式デッキ表示画面タブ

### 概要とアクセス

公式のデッキ表示ページ (`member_deck.action?ope=1`) に追加される機能の設定です。

**アクセス方法**:
- マイデッキ一覧からデッキ名をクリック
- デッキ検索からデッキを選択

### シャッフル機能

**機能説明**:
- メインデッキのカード順序をランダムに並べ替え
- カードを右上クリックで固定/固定解除
- 固定したカードはシャッフル時も先頭に配置

**Opt-out設定**:
- ✅ 有効（デフォルト）
- ⬜ 無効

### 画像作成機能

**機能説明**:
- デッキレシピを画像として保存
- タイトルのカスタマイズ
- 背景色の選択（赤/青）
- QRコードの表示/非表示

**Opt-out設定**:
- ✅ 有効（デフォルト）
- ⬜ 無効

---

## 3. Generalタブ

### 全般設定

#### キーボードショートカット設定

デッキ編集画面での操作を効率化するキーボードショートカットを設定できます。

**設定可能なショートカット**:
- **グローバル検索**: デフォルト `/`（スラッシュキー）
  - カード検索モードを開く
- **Undo**: デフォルト `Ctrl+Z`
  - 直前の操作を取り消す
- **Redo**: デフォルト `Ctrl+Y`
  - 取り消した操作をやり直す

**設定方法**:
1. 設定したい項目のボタンをクリック
2. ダイアログが表示されたら、実際に使用したいキーの組み合わせを押す
3. プレビューで確認後、「保存」をクリック

**対応する修飾キー**:
- Ctrl
- Shift
- Alt

**注意**:
- Metaキー（Windowsキー/Commandキー）は現在サポートされていません
- 修飾キーのみ（Ctrl、Shift、Altのみ）は設定できません
- 必ず修飾キーと組み合わせるか、単一のキーを設定してください

#### 設定リセット
- **「全ての設定をリセット」ボタン**: 全ての設定を初期値に戻す

#### カラーテーマ（未実装）
現在は機能していません。将来のバージョンで実装予定。

#### 言語（未実装）
現在は公式サイトの言語設定を自動検出します。

---

## 設定の保存

設定は自動的にChrome Storageに保存されます。ブラウザを閉じても設定は維持されます。

### デフォルト値

| 設定項目 | デフォルト値 |
|---------|------------|
| カード画像サイズ | L（大） |
| 検索入力欄位置 | Right Top |
| Side/Extra配置 | 縦並び |
| デッキ枚数制限 | No Limit |
| 未保存時警告 | Always |
| 高度なマウス操作 | Disable |
| グローバル検索ショートカット | / |
| Undoショートカット | Ctrl+Z |
| Redoショートカット | Ctrl+Y |
| シャッフル機能 | 有効 |
| 画像作成機能 | 有効 |

---

## 機能別の推奨設定

### 初心者向け
- カード画像サイズ: **L**
- 未保存時警告: **Always**
- 高度なマウス操作: **Disable**

### 上級者向け
- カード画像サイズ: **M**（一度に多く表示）
- 未保存時警告: **Without sorting order only**
- 高度なマウス操作: **Enable**（効率化）

### 画面が小さい環境
- カード画像サイズ: **S**
- Side/Extra配置: **横並び**

---

## トラブルシューティング

### 設定が保存されない
1. Chrome Storageが有効か確認
2. プライベートブラウジングモードでは保存されない場合があります
3. 拡張機能を再インストール

### 機能が動作しない
1. 該当タブで機能が有効になっているか確認
2. ページをリロード（Ctrl+R / Cmd+R）
3. 拡張機能を無効化→有効化

### キャッシュが溜まりすぎた
1. 「キャッシュ管理」タブを開く
2. 「カード情報キャッシュをクリア」ボタンをクリック

---

## 関連ドキュメント

- [デッキ編集機能の基本操作](./custom-deck-edit.md)
- [シャッフル・画像作成機能](./deck-show.md)
- [検索・フィルター機能](./search-filter.md)
- [言語設定について](./language.md)
