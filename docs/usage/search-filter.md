# 検索・フィルター機能ガイド

デッキ編集画面での検索・フィルター機能の使い方を説明します。

## 概要

v0.4.0～v0.5.8で検索・フィルター機能が大幅に強化されました。カード名での検索に加え、属性・種族・レベルなど様々な条件でカードを絞り込むことができます。

**v0.5.8の新機能:**
- 履歴スラッシュコマンド（`/history-search`）- 過去の検索条件を再利用
- お気に入りスラッシュコマンド（`/favorite-search`）- よく使う検索条件にアクセス
- 検索条件数バッジ - 現在適用中のフィルター数を表示

**v0.4.1の新機能:**
- コマンドモード（チップベースフィルター）
- NOT条件（`-`プレフィックス）
- マイデッキ選択機能

## 基本的な使い方

### カード名検索

1. 検索バーにカード名を入力
2. リアルタイムで検索結果が表示される
3. 部分一致で検索される

### グローバル検索モード

検索バーの位置を「グローバル」に設定すると、画面上部に固定され、常に検索が可能になります。

**設定方法**:
1. オプションページを開く
2. デッキ編集画面 > UI設定
3. 「検索入力欄の位置」を設定（Right Top / Right Bottom / Left Bottom）

### マイデッキ選択機能（v0.4.1追加）

手持ちのデッキから直接カードを検索できます。

**使い方:**
1. 検索モードドロップダウンで「マイデッキ」を選択
2. デッキ一覧から対象デッキを選択
3. 選択したデッキ内のカードが検索結果に表示される

## コマンドモード（v0.4.1追加）

`/`で始まるコマンドを入力することで、高度な検索・フィルター条件を指定できます。

### 基本的な使い方

検索バーに `/` を入力すると、コマンドモードが起動します。

**例:**
```
/種族:戦士族
/属性:闇
/レベル:4
```

### 履歴・お気に入りコマンド（v0.5.8追加）

過去の検索条件を素早く再利用できます。

**履歴コマンド（`/history-search`）:**
```
/history-search
```
- 検索バーに `/history-search` を入力すると、過去の検索条件の履歴が表示されます
- 履歴から選択すると、その検索条件が即座に適用されます

**お気に入りコマンド（`/favorite-search`）:**
```
/favorite-search
```
- 検索バーに `/favorite-search` を入力すると、お気に入り登録した検索条件が表示されます
- よく使う検索条件をお気に入りに登録しておくと便利です

### チップベースフィルター

コマンドを入力してEnterキーを押すと、条件が「チップ」として検索バーに追加されます。複数のチップを組み合わせてAND条件で絞り込めます。

**例:**
```
/種族:戦士族 → Enter
/属性:闇 → Enter
結果: 「闇属性」かつ「戦士族」のカードが表示
```

### NOT条件（除外条件）

`-`プレフィックスを付けることで、特定の条件を**除外**できます。

**例:**
```
-種族:戦士族     # 戦士族以外
-属性:闇         # 闇属性以外
-モンスタータイプ:効果   # 効果モンスター以外
```

### 複数値の指定

`+`で区切って複数の値を指定できます（OR条件）。

**例:**
```
/種族:戦士族+魔法使い族    # 戦士族または魔法使い族
/属性:光+闇               # 光属性または闇属性
```

### サポートされるコマンド

**フィルター条件:**
- `/種族:戦士族`
- `/属性:闇`
- `/レベル:4`
- `/ランク:4`
- `/リンク:2`
- `/モンスタータイプ:効果`
- `/カードタイプ:モンスター`

**履歴・お気に入り（v0.5.8）:**
- `/history-search` - 検索履歴
- `/favorite-search` - お気に入り

### 実用例

**闇属性の魔法使い族で、レベル4以下を検索:**
```
/属性:闇 → Enter
/種族:魔法使い族 → Enter
/レベル:1+2+3+4 → Enter
```

**戦士族以外の効果モンスターを検索:**
```
/モンスタータイプ:効果 → Enter
-種族:戦士族 → Enter
```

## フィルター機能

### フィルターダイアログを開く

1. 検索バーの右側にある三点メニュー（...）をクリック
2. SearchFilterDialogが開く

**v0.5.8の改善:**
- 検索条件ダイアログの「検索条件」タブにフィルター条件数のバッジを追加
- 現在適用中のフィルター数が一目で分かるようになりました

### フィルター条件

以下の条件でカードを絞り込めます：

#### カードタイプ
- モンスター
- 魔法
- 罠

#### 属性（モンスターのみ）
- 闇属性
- 光属性
- 地属性
- 水属性
- 炎属性
- 風属性
- 神属性

#### 種族（モンスターのみ）
- 戦士族、魔法使い族、ドラゴン族など

#### レベル/ランク/リンク
- レベル1〜12
- ランク1〜12
- リンク1〜8

#### モンスタータイプ
- 通常、効果、儀式、融合、シンクロ、エクシーズ、ペンデュラム、リンク

### 複数条件の組み合わせ

複数の条件を選択すると、AND条件で絞り込まれます。

例：「闇属性」AND「魔法使い族」AND「レベル7」

### フィルター条件の視覚表示

適用中のフィルター条件は、検索バーの下に小さなアイコンで表示されます。これにより、現在どの条件が適用されているか一目で確認できます。

### フィルターのクリア

- フィルターダイアログの「クリア」ボタンをクリック
- または、各条件を個別に解除

## 検索結果の表示

検索・フィルター結果は以下の形式で表示できます：

### リスト表示
- カード名と基本情報を一覧表示
- 詳細情報を確認しやすい

### グリッド表示
- カード画像をタイル状に表示
- 多くのカードを一度に確認できる

**切り替え方法**: 表示切り替えボタン（リスト/グリッドアイコン）をクリック

## Tips

### 効率的な検索のコツ

1. **カード名が分かる場合**: 直接検索バーに入力
2. **条件で探す場合**: フィルターを使用
3. **大量のカードから探す場合**: フィルターで絞り込んでから検索

### よく使うフィルター組み合わせ

- **エクストラデッキモンスター**: カードタイプ「モンスター」+ モンスタータイプ「融合/シンクロ/エクシーズ/リンク」
- **低レベルモンスター**: レベル1〜4を選択
- **手札誘発**: 闇属性 + 魔法使い族（一例）

## 関連ドキュメント

- [デッキ編集機能の基本操作](./custom-deck-edit.md)
- [ソート機能ガイド](./sort.md)
- [カテゴリ・タグ機能ガイド](./category-tag.md)
