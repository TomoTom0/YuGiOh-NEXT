# Changelog

All notable changes to this project will be documented in this file.

The format is based on [Keep a Changelog](https://keepachangelog.com/en/1.0.0/),
and this project adheres to [Semantic Versioning](https://semver.org/spec/v2.0.0.html).

詳細な変更履歴は [docs/changelog/](./docs/changelog/) を参照してください。

---

## [Unreleased]

---

## [0.4.5] - 2025-11-30

### Added
- テキスト展開の動的高さ測定によるスムーズなアニメーション
  - scrollHeightを使って実際のコンテンツ高さを測定
  - 0.25s cubic-bezier(0.4, 0, 0.2, 1)のイージング
  - コンテンツの長さに関わらず常に最適なアニメーション速度

### Changed
- テキストあふれインジケーターをテーマ対応グラデーションに改善
  - mask-imageを使用してライト/ダークモード対応
  - var(--card-bg)とvar(--bg-secondary)で背景色を継承
  - 右下40px×40pxのグラデーション三角形

### Fixed
- scroll-to-top機能の修正と全タブでの動作保証
  - search tabでscroll-to-topボタンが機能しない問題を修正
  - CardDetail.vue (related tab)とCardProducts.vue (products tab)のscroll-to-top機能を復元
  - 各タブで適切なスクロールコンテナを指定（search: `.card-list-results`, related/products: `.card-tab-content`）
- scroll-to-topテストの修正とブラウザ起動時の日本語設定
  - ブラック・マジシャンで検索統一（関連カードが多いカードを使用）
  - ブラウザ起動時に日本語ページを開くよう修正

---

## [0.4.4] - 2025-11-29

### Added
- 検索フィルターダイアログのヘッダーに選択中のフィルターチップを表示
- 右クリック・中クリックでカード追加時のアニメーション

### Changed
- 検索フィルターダイアログのクリア/閉じるボタンをアイコン化
- AND/ORチップのスタイル改善（リンクマーカー、モンスタータイプ）
- セクションタイトルに無効状態のスタイル追加
- 設定関連のリファクタリング（deepMerge、keyboardShortcuts検証）

### Fixed
- NOT条件（除外モンスタータイプ）が機能しない問題を修正
- 検索フィルターのAND/OR論理演算が適用されない問題を修正
- ペンデュラムスケール、魔法・罠タイプ、発売日フィルターが適用されない問題を修正

---

## [0.4.2] - 2025-11-27

### Added
- オプションページUI/UX改善（2層タブ構成、視覚的プレビュー）
- UX設定機能（未保存時の警告、高度なマウス操作）
- キーボードショートカット設定機能（グローバル検索、Undo/Redo）

### Changed
- Chrome Web Store用画像を追加（WebP形式、3枚）

詳細: [v0.4.2 変更履歴](./docs/changelog/v0.4.2.md)

---

## [0.4.1] - 2025-11-25

### Added
- デッキ操作機能（新規作成・複製・削除・NEXT編集ボタン・Undo/Redo）
- キャッシュシステム刷新（UnifiedCacheDB、stale-while-revalidate戦略）
- 検索機能大幅強化（コマンドモード、マイデッキ選択、チップフィルター）
- タグ・カテゴリフィルタ強化（ダイアログ内検索、詳細条件）
- UI/UX改善（Reloadボタン、未保存時確認ダイアログ）

### Changed
- タグマッピングの一元化、内部キー判定への変更

### Fixed
- CardListのuuid永続化、CardDetail再フェッチ問題、キャッシュ判定条件

詳細: [v0.4.1 変更履歴](./docs/changelog/v0.4.1.md)

---

## [0.3.11] - 2025-11-20

### Added
- 内部レビュー対応（Phase 1-3完了）

---

## [0.3.10] - 2025-11-19

### Fixed
- ボタン押下時のアニメーション開始位置を修正

---

## [0.3.9] - 2025-11-18

### Added
- PNG画像へのデッキ情報埋め込み機能（tEXtチャンク、enc/imgHash対応）

---

## [0.3.8] - 2025-11-17

### Added
- デッキインポート機能（CSV/TXT/PNG形式）

---

## [0.3.7] - 2025-11-16

### Added
- メタデータUI改善（カテゴリダイアログ、グリッドレイアウト）

---

## [0.3.6] - 2025-11-16

### Added
- カード枚数制限超過時の警告表示

---

## [0.3.5] - 2025-11-15

### Added
- カード情報タブに複数画像選択機能（イラスト違い対応）

---

## [0.3.4] - 2025-11-15

### Added
- 禁止制限カード表示機能（アイコンと色）

---

## [0.3.3] - 2025-11-14

### Fixed
- デッキ編集画面のレイアウト問題修正

---

## [0.3.2] - 2025-11-14

### Added
- 設定管理システム構築（カードサイズ、Extra/Side配置、CSS変数）
- ブランディング改善（「遊戯王NEXT」への統一、公式アイコン）
- URLパラメータdnoでデッキを直接開く機能

---

## [0.3.0] - 2025-11-13

### Added

#### デッキ編集機能
- **デッキ編集ページ** (`#/ytomo/edit`)
  - DNO入力によるデッキの読み込み
  - カード検索機能（名前、属性、種族、レベル、攻撃力、守備力で検索）
  - カード詳細表示（Info/Related/Products/QAタブ）
  - リスト/グリッド表示の切り替え
  - カードソート機能（公式順、レベル順、攻撃力順、守備力順）
  - レスポンシブデザイン（モバイル対応）
  - カード枚数制限（同一カードは3枚まで）

#### 多言語対応基盤
- 日本語・英語の自動検出機能
- 言語ごとのカード情報取得
- 属性・種族・モンスタータイプの多言語マッピング

#### オプションページ
- デッキ編集機能の詳細設定
  - 機能のON/OFF切り替え
  - デフォルト表示モード（リスト/グリッド）
  - デフォルトソート順
  - アニメーション有効化/無効化
  - 言語設定（自動/日本語/英語）

#### UI/UX改善
- テーマカラー統一（青緑→赤紫グラデーション）
- リンクマーカー表示の改善（直角二等辺三角形、正しい向き）
- カード詳細タブのアニメーション（フェードイン）
- Q&A・収録パック展開機能
- 自動スクロール調整機能

### Changed
- Card型の`imageId`を`ciid`に統一
- `ciid`と`imgs`を必須プロパティに変更
- `buildCardImageUrl`を非推奨化、`getCardImageUrl`に統一

### Fixed
- リンクマーカーのビット位置マッピング修正
- デッキエリアの下部余白追加（検索エリアで隠れない対策）
- CardListコンポーネントのスタイル統一
- テストファイルの`__dirname`問題修正（vitest対応）

詳細: [v0.3.0 変更履歴](./docs/changelog/v0.3.0.md)

---

## [0.2.0] - 2025-11-09

### Added
- デッキレシピ画像作成機能
  - Canvas描画による画像生成
  - QRコード生成（公開デッキ用）
  - カラーバリエーション（赤/青）
- シャッフル・ソート・固定機能
  - デッキのカード順序をランダム化
  - 元の順序に戻すソート機能
  - 特定カードの固定機能
- オプションページ
  - 機能のON/OFF切り替え
  - 機能説明と使い方の表示

### Changed
- CardType型を英語識別子に統一

---

## [0.1.0] - 2025-11-07

### Added
- 基本的なカード検索API
- デッキ詳細パーサー
- カードFAQパーサー
- Chrome拡張機能の基本構造

---

[0.3.0]: https://github.com/TomoTom0/YuGiOh-NEXT/compare/v0.2.0...v0.3.0
[0.2.0]: https://github.com/TomoTom0/YuGiOh-NEXT/compare/v0.1.0...v0.2.0
[0.1.0]: https://github.com/TomoTom0/YuGiOh-NEXT/releases/tag/v0.1.0
